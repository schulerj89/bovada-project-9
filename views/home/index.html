<!DOCTYPE html>
<html>
  <head>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="http://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
    <style>
      .row {
        border: 1px solid black;
      }
      .container {
        margin-top: 20px;
      }
      .gametime {
        padding-top: 10px;
        border-right: 1px solid;
        text-align: center;
        background: aquamarine;
      }
      .score {
        border-left: 1px solid black;
        border-right: 1px solid black;
        text-align: center;
        background: gold;
        font-weight: bold;
      }
      .border-right {
        border-right: 1px solid black;
      }
    </style>
  </head>
  <script src = "/socket.io/socket.io.js"></script>
   <script>
      var socket = io();

      setInterval(function() {
            socket.emit('UpdateGames');
        }, 20000);

        socket.on('UpdateStats', function(data){
            var players = data.gamelines;
            jQuery('.games').html('');
            for(var i = 0; i < players.length; i++) {
                var html = '<div class="row">';
                html += ' \
                <div class="col-2 gametime">' + players[i].gameTime + '</div> \
                  <div class="col-1 score text-center"> \
                    <div class="col">' + players[i].score.team1 + '</div> \
                    <div class="col">' + players[i].score.team2 + '</div> \
                  </div> \
                  <div class="col-3 border-right"> \
                    <div class="col">' + players[i].team1 + '</div> \
                    <div class="col">' + players[i].team2 + '</div> \
                  </div> \
                  <div class="col-2 lines text-center border-right"> \
                    <div class="col">' + players[i].marketLine.team1 + '</div> \
                    <div class="col">' + players[i].marketLine.team2 + '</div> \
                  </div> \
                  <div class="col-2 betprice text-center border-right"> \
                    <div class="col">' + players[i].betPrice.team1 + '</div> \
                    <div class="col">' + players[i].betPrice.team2 + '</div> \
                  </div> \
                  <div class="col-2 total text-center"> \
                    <div class="col">' + players[i].totalOutcome.team1 + '</div> \
                    <div class="col">' + players[i].totalOutcome.team2 + '</div> \
                  </div> \
                ';
                jQuery('.games').prepend(html);
            }
            jQuery(".fade-it").delay(150).animate({
                "background-color": "#fc9"
            }, 350, function () {
                $(".fade-it").animate({
                "background-color": "#fff"
                }, 200);
            });
        });
   </script>
  <body>
    <div class="container">
      <div><h3>MLB GAMES</h3></div>
      <div class="games fade-it">
        {{#gamelines}}
        <div class="row">
          <div class="col-2 gametime">{{gameTime}}</div>
          <div class="col-1 score text-center">
            <div class="col">{{score.team1}}</div>
            <div class="col">{{score.team2}}</div>
          </div>
          <div class="col-3 border-right">
            <div class="col">{{team1}}</div>
            <div class="col">{{team2}}</div>
          </div>
          <div class="col-2 lines text-center border-right">
            <div class="col">{{marketLine.team1}}</div>
            <div class="col">{{marketLine.team2}}</div>
          </div>
          <div class="col-2 betprice text-center border-right">
            <div class="col">{{betPrice.team1}}</div>
            <div class="col">{{betPrice.team2}}</div>
          </div>
          <div class="col-2 total text-center">
            <div class="col">{{totalOutcome.team1}}</div>
            <div class="col">{{totalOutcome.team2}}</div>
          </div>
        </div>
        {{/gamelines}}
      </div>
    </div>
  </body>
</html>